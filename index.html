<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Timer Asta Fantacalcio</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 40px; }
    #timer {
      font-size: 80px;
      font-weight: bold;
      margin: 20px;
      transition: color 0.3s ease;
    }
    .warning {
      color: red;
      animation: shake 0.5s infinite alternate;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      50% { transform: translateX(5px); }
      100% { transform: translateX(-5px); }
    }
    button {
      font-size: 20px;
      padding: 10px 25px;
      margin: 10px;
      cursor: pointer;
    }
    #message {
      font-size: 36px;
      margin-top: 30px;
      min-height: 100px;
      padding: 20px;
      border-radius: 10px;
      transition: background-color 0.5s ease;
      color: white;
      font-weight: bold;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      text-transform: uppercase;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
  </style>
</head>
<body>

<h1>Timer Asta Fantacalcio</h1>
<div id="timer">8</div>

<button id="startBtn">Avvia Timer</button>
<button id="rilancioBtn" disabled>Rilancio</button>
<button id="astaChiusaBtn" disabled>Asta Chiusa</button>

<div id="message"></div>

<script>
  const timerEl = document.getElementById('timer');
  const startBtn = document.getElementById('startBtn');
  const rilancioBtn = document.getElementById('rilancioBtn');
  const astaChiusaBtn = document.getElementById('astaChiusaBtn');
  const messageEl = document.getElementById('message');

  let timeLeft = 8;
  let timerInterval = null;

  const rilancioMessages = [
    "Colpo da maestro! ğŸ¯", "Offerta d'Ã©lite! ğŸ’¼", "Boom! ğŸ’¥",
    "Rilancio fulmineo! âš¡", "Ma dove vai?!", "Attenzione ai colpi bassi!",
    "Ti stai scaldando troppo... ğŸ”¥", "Un altro? Sei sicuro?", "Occhi negli occhi ğŸ‘€",
    "Asta di fuoco! ğŸ”¥", "Momento epico! ğŸŒŸ", "Standing ovation! ğŸ‘",
    "La follia ha un prezzo!", "Sfida titanica! ğŸ›¡ï¸", "Altro che Champions League!",
    "Rilancio shock! âš ï¸", "Azzardo totale! ğŸ§¨", "Tensione alle stelle! ğŸš€",
    "Lo voleva anche tua nonna!", "Battaglia finale! ğŸ", "Ti stai innamorando?",
    "Offerta romantica? ğŸ’˜", "Da urlo!", "Lo stai strapagando... ğŸ’¸",
    "Chi offre di piÃ¹?", "Tutti zitti, Ã¨ il tuo momento.", "Che stile, che grinta!",
    "Rilancio chirurgico! ğŸ’‰", "Assurdo!", "Non ci credo!", "Ti stai giocando tutto!",
    "Ãˆ guerra aperta!", "Il tavolo trema! ğŸ’£", "Nessuno se lo aspettava!",
    "Brividi! â„ï¸", "Vai col botto!", "Questa Ã¨ una dichiarazione dâ€™amore.",
    "Un'offerta da leggenda! ğŸ†", "Lo compri o lo adotti?", "Tutti gli occhi su di te!",
    "Tensione palpabile!", "Te lo sognerai stanotte!", "Lo prenderai?",
    "Adesso si fa sul serio!", "Tutti impazziti!", "Non puoi piÃ¹ tornare indietro!",
    "L'offerta delle offerte!", "Ora o mai piÃ¹!", "Il pubblico esulta!", "Che spettacolo!"
  ];

  const chiusaMessages = [
    "Asta chiusa! Complimenti al vincitore! ğŸ‰", "Ãˆ tuo! Grande acquisto! ğŸ¥³",
    "Congratulazioni, colpo perfetto! ğŸ…", "Che affare!", "Hai fatto impazzire tutti!",
    "Il giocatore ha firmato per te! âœï¸", "Un talento nelle tue mani!",
    "Nessuno poteva fermarti! ğŸ’ª", "Onore al re dellâ€™asta! ğŸ‘‘", "L'acquisto del secolo!",
    "Ci hai messo il cuore â¤ï¸", "Non ce nâ€™era per nessuno!", "Hai dominato!",
    "Gli applausi sono tutti per te ğŸ‘", "Un affare da incorniciare ğŸ–¼ï¸",
    "Ora inizia il divertimento! ğŸˆ", "Missione compiuta! âœ…", "Fumata bianca! âšª",
    "L'hai strappato agli avversari!", "La tua rosa sorride! ğŸ˜Š"
  ];

  function getRandomMessage(messages) {
    return messages[Math.floor(Math.random() * messages.length)];
  }

  function getRandomBrightColor() {
    const letters = '89ABCDEF';
    let color = '#';
    for(let i=0; i<6; i++) {
      color += letters[Math.floor(Math.random() * letters.length)];
    }
    return color;
  }

  function updateTimer() {
    timerEl.textContent = timeLeft;
    if (timeLeft <= 3 && timeLeft > 0) {
      timerEl.classList.add('warning');
    } else {
      timerEl.classList.remove('warning');
    }

    if (timeLeft === 0) {
      clearInterval(timerInterval);
      timerEl.textContent = "0";
      timerEl.classList.remove('warning');
      messageEl.style.backgroundColor = 'transparent';
      messageEl.textContent = "TEMPO SCADUTO! PROSSIMA OFFERTA.";
      rilancioBtn.disabled = true;
      astaChiusaBtn.disabled = false;
      return;
    }

    timeLeft--;
  }

  function startTimer() {
    clearInterval(timerInterval);
    timeLeft = 8;
    timerEl.textContent = timeLeft;
    timerEl.classList.remove('warning');
    timerInterval = setInterval(updateTimer, 1000);
  }

  startBtn.addEventListener('click', () => {
    messageEl.textContent = '';
    messageEl.style.backgroundColor = 'transparent';
    rilancioBtn.disabled = false;
    astaChiusaBtn.disabled = true;
    startTimer();
  });

  rilancioBtn.addEventListener('click', () => {
    // consentiamo rilancio finchÃ© timeLeft >= 1 (quindi quando vediamo 1 sul timer)
    if (timeLeft >= 1) {
      const msg = getRandomMessage(rilancioMessages);
      messageEl.textContent = msg.toUpperCase();
      messageEl.style.backgroundColor = getRandomBrightColor();
      startTimer();
    } else {
      messageEl.textContent = "NON PUOI RILANCIARE, TEMPO SCADUTO!";
      messageEl.style.backgroundColor = 'transparent';
      rilancioBtn.disabled = true;
    }
  });

  astaChiusaBtn.addEventListener('click', () => {
    const msg = getRandomMessage(chiusaMessages);
    messageEl.textContent = msg.toUpperCase();
    messageEl.style.backgroundColor = getRandomBrightColor();
    rilancioBtn.disabled = true;
    astaChiusaBtn.disabled = true;
    clearInterval(timerInterval);
  });
</script>

</body>
</html>
